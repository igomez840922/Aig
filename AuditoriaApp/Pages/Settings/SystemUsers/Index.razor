@page "/settings/systemusers"
@attribute [Authorize]
@layout MainLayout

<MudText Typo="Typo.h5" Color="Color.Primary" Class="mb-4">System Users</MudText>
<MudGrid>
    <MudItem xs="12">
        <MudCard Elevation="25">
            <EditForm Model="@model" OnValidSubmit="FetchData">
                <DataAnnotationsValidator />
                <MudCard>
                    <MudCardHeader>
                        <CardHeaderContent>
                            <MudText>Filter</MudText>
                        </CardHeaderContent>
                        <CardHeaderActions>
                            <MudMenu Icon="@Icons.Material.Filled.MoreVert" Dense="true">
                                <MudMenuItem Icon="@Icons.Material.Outlined.Add" OnTouch="@((e)=> OnEdit())" OnClick="@((e)=> OnEdit())">@languageContainerService.Keys["New"]</MudMenuItem>
                                <MudMenuItem Icon="@Icons.Material.Outlined.Refresh" OnTouch="@((e)=> FetchData())" OnClick="@((e)=> FetchData())">@languageContainerService.Keys["Refresh"]</MudMenuItem>
                            </MudMenu>
                        </CardHeaderActions>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudGrid>
                            <MudItem xs="12" md="6">
                                <MudTextField Margin="Margin.Dense" @bind-Value="model.Filter" Label="Search" Variant="Variant.Outlined" Adornment="Adornment.End" AdornmentIcon="@Icons.Filled.Search" OnAdornmentClick="FetchData" DebounceInterval="2000" OnDebounceIntervalElapsed="FetchData" />
                            </MudItem>
                        </MudGrid>
                    </MudCardContent>
                   @*  <MudCardActions Class="pb-4 pl-4">
                        <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Search</MudButton>
                    </MudCardActions> *@
                </MudCard>
            </EditForm>
        </MudCard>
    </MudItem>
    <MudItem xs="12">

        @if (model != null && model.Ldata != null)
        {
            <MudTable Items="@(model.Ldata)" Dense="false" Hover="true" Bordered="false" Striped="true" RowsPerPage="@(model.PagAmt)">
                @*<ToolBarContent>
            <MudText Typo="Typo.h6">Periodic Elements</MudText>
            <MudSpacer />
            <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
            </ToolBarContent>*@
                <HeaderContent>
                    <MudTh>Full Name</MudTh>
                    <MudTh>Email</MudTh>
                    <MudTh>Phone Number</MudTh>
                    <MudTh></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Full Name">@context.UserProfile?.FullName</MudTd>
                    <MudTd DataLabel="Email">@context.Email</MudTd>
                    <MudTd DataLabel="Phone Number">@context.UserProfile?.PhoneNumber</MudTd>
                    <MudTd Style="text-align:right">
                        <MudMenu Icon="@Icons.Material.Filled.MoreVert" Dense="true">
                            <MudMenuItem Icon="@Icons.Material.Outlined.Password" OnTouch="@((e)=> OnChangePasw(@context))" OnClick="@((e)=> OnChangePasw(@context))">@languageContainerService.Keys["Password"]</MudMenuItem>
                            <MudMenuItem Icon="@Icons.Material.Outlined.Edit" OnTouch="@((e)=> OnEdit(@context))" OnClick="@((e)=> OnEdit(@context))">@languageContainerService.Keys["Edit"]</MudMenuItem>
                            <MudMenuItem Icon="@Icons.Material.Outlined.Delete" OnTouch="@((e)=> OnDelete(@context))" OnClick="@((e)=> OnDelete(@context))">@languageContainerService.Keys["Delete"]</MudMenuItem>
                            @*<MudMenuItem OnClick="@((e)=> OnEdit(@context))" Icon="@Icons.Outlined.Edit" >@languageContainerService.Keys["Edit"]</MudMenuItem>
                        <MudMenuItem OnClick="@((e)=> OnDelete(@context))" Icon="@Icons.Outlined.Delete">@languageContainerService.Keys["Delete"]</MudMenuItem>*@
                        </MudMenu>
                    </MudTd>
                </RowTemplate>
                <NoRecordsContent>
                    <MudText>No Data Found</MudText>
                </NoRecordsContent>
                <LoadingContent>
                    <MudText>Loading...</MudText>
                </LoadingContent>
                <PagerContent>
                    <MudPagination Class="ma-2" Rectangular="true" Variant="Variant.Outlined" ShowFirstButton="@true" ShowLastButton="@true" SelectedChanged="OnPagingChange" Count="@(model?.PagesCount??0)" Selected="@(model?.PagIdx+1??0)" BoundaryCount="2" MiddleCount="3" />
                </PagerContent>
            </MudTable>
        }
        

    </MudItem>

</MudGrid>
