@using Aig.Farmacoterapia.Domain.Entities.Enums
@using Aig.Farmacoterapia.Infrastructure.Application
@inject AppState _appState;
<MudDialog DisableSidePadding="true">
    <DialogContent>
        <MudContainer Style="max-height:650px; overflow-y: scroll">
            <EditForm Model="@search" class="kt-form kt-form--label-right">

                <div class="kt-portlet__body">
                   
                  @*  <div class="form-group">
                        <div class=" col-lg-12">
                            <label>Clasificación Med.</label>
                            <InputText type="text" class="form-control" @bind-Value="search.Classification" />
                            <span class="form-text text-muted">
                               Síntesis Química (SI),Radiofármacos (RA), Huérfanos (HU), Homeopáticos (HO)
                               Fitofármacos (FF), Biotecnológicos (BT), Biológicos(BI), Otro (OT)
                            </span>
                            <select class="form-control" @bind="search.Classification">
                                 <option value="" selected>Ninguna</option>
                                  <option value="@(TipoEquivalencia.Generico)">Medicamento Genérico</option>
                                  <option value="@(TipoEquivalencia.Intercambiable)">Medicamento Intercambiable</option>
                                  <option value="@(TipoEquivalencia.DeMarca)">Medicamento de Marca</option>
                            </select>
                        </div>
                    </div>*@
                 
                     <div class="form-group">
                        <div class=" col-lg-12">
                            <label>Condición de venta</label>
                            <select class="form-control" @bind="search.SaleCondition">
                                <option value="" selected>Ninguna</option>
                                <option value="@(TipoCondicionVenta.SinPrescripcion)">Sin Prescripción Médica</option>
                                <option value="@(TipoCondicionVenta.ConPrescripcion)">Con Prescripción Médica</option>
                                <option value="@(TipoCondicionVenta.UsoHospitalario)">Uso Hospitalario Exclusivo</option>
                                <option value="@(TipoCondicionVenta.VentaPopular)">Venta Popular</option>
                            </select>
                        </div>
                    </div>

                   @* <div class="form-group">
                        <div class=" col-lg-12">
                            <input type="checkbox" @bind="search.Valid">
                            <label>Vigente</label>
                        </div>
                    </div>*@

                </div>

            </EditForm>
        </MudContainer>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Primary"  @onclick="() => OnSearch()">Filtrar</MudButton>
    </DialogActions>
</MudDialog>
@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    private AppFilter search { get; set; } = new AppFilter();
    protected override async Task OnInitializedAsync()
    {
        search = _appState.Filter;
        await base.OnInitializedAsync();
    }
    protected void OnSearch()
    {
        search.Term = string.Empty;
        MudDialog.Close(DialogResult.Ok(search));
    }
}